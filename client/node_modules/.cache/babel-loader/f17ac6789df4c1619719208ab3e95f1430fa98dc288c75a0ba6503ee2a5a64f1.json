{"ast":null,"code":"var _jsxFileName = \"/Users/riku.isayama/Documents/0/chat-app/client/src/components/CreateChannelComponent.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport PlusIcon from \"@heroicons/react/24/outline/PlusIcon\";\nimport { useEffect, useState } from \"react\";\nimport { createChannel } from \"../services/chatService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction classNames(...classes) {\n  return classes.filter(Boolean).join(\" \");\n}\nconst CreateChannelComponent = ({\n  channels\n}) => {\n  _s();\n  const [showInputField, setShowInputField] = useState(false);\n\n  // Function to close the input field when clicking outside of the component\n  const closeInputField = event => {\n    if (!event.target.closest(\"#create-channel-component\")) {\n      setShowInputField(false);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"click\", closeInputField);\n    return () => window.removeEventListener(\"click\", closeInputField);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"create-channel-component\",\n    children: showInputField ? /*#__PURE__*/_jsxDEV(CreateChannelInputField, {\n      setShowInputField: setShowInputField,\n      channels: channels\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"text-indigo-600 hover:bg-indigo-50 group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold mt-2 w-full\",\n      onClick: event => {\n        event.stopPropagation(); // Prevent click event from bubbling\n        setShowInputField(true);\n      },\n      children: [/*#__PURE__*/_jsxDEV(PlusIcon, {\n        className: \"text-indigo-600 h-6 w-6 shrink-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), \"Create a channel\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateChannelComponent, \"ee3xVhPa6h2+vFh+8fxJ2WplRd0=\");\n_c = CreateChannelComponent;\nconst CreateChannelInputField = ({\n  setShowInputField,\n  channels\n}) => {\n  _s2();\n  const [value, setValue] = useState(\"\");\n  const [isError, setIsError] = useState(false);\n  const handleInput = event => {\n    if (isError) setIsError(false);\n    const transformedValue = event.target.value.replace(/\\s+/g, \"-\");\n    setValue(transformedValue);\n  };\n  const handleKeyDown = event => {\n    if (event.key === \"Enter\" && value.length !== 0) {\n      createChannel(value);\n      setValue(\"\");\n      setShowInputField(false);\n    }\n\n    // Prevent creation of same channel name\n    if (channels.some(channel => channel.name === value)) setIsError(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative mt-2 flex items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: value,\n      onChange: handleInput,\n      onKeyDown: handleKeyDown,\n      placeholder: \"Enter your channel name\",\n      autoFocus: true,\n      className: classNames(isError ? \"bg-red-50 border border-red-500\" : \" ring-indigo-600\", \"block w-full rounded-md border-0 py-1.5 pl-2 pr-10 text-gray-900 shadow-sm ring-2 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-y-0 right-0 flex py-1.5 pr-1.5\",\n      children: /*#__PURE__*/_jsxDEV(\"kbd\", {\n        className: \"inline-flex items-center rounded border border-gray-200 px-1 font-sans text-xs text-gray-400\",\n        children: \"Enter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), isError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-2 text-sm text-red-600 dark:text-red-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-medium\",\n        children: \"Too late!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 78\n      }, this), \" Channel name's already taken.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s2(CreateChannelInputField, \"INIWFDYiK1KMD7SbrMZ/6dxBjeo=\");\n_c2 = CreateChannelInputField;\nexport default CreateChannelComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"CreateChannelComponent\");\n$RefreshReg$(_c2, \"CreateChannelInputField\");","map":{"version":3,"names":["PlusIcon","useEffect","useState","createChannel","jsxDEV","_jsxDEV","classNames","classes","filter","Boolean","join","CreateChannelComponent","channels","_s","showInputField","setShowInputField","closeInputField","event","target","closest","window","addEventListener","removeEventListener","id","children","CreateChannelInputField","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","stopPropagation","_c","_s2","value","setValue","isError","setIsError","handleInput","transformedValue","replace","handleKeyDown","key","length","some","channel","name","type","onChange","onKeyDown","placeholder","autoFocus","_c2","$RefreshReg$"],"sources":["/Users/riku.isayama/Documents/0/chat-app/client/src/components/CreateChannelComponent.tsx"],"sourcesContent":["import PlusIcon from \"@heroicons/react/24/outline/PlusIcon\";\nimport { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport { createChannel } from \"../services/chatService\";\n\nfunction classNames(...classes: string[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n\ninterface CreateChannelComponentProps {\n  channels: { id: string; name: string }[];\n}\n\nconst CreateChannelComponent: React.FC<CreateChannelComponentProps> = ({\n  channels,\n}) => {\n  const [showInputField, setShowInputField] = useState<boolean>(false);\n\n  // Function to close the input field when clicking outside of the component\n  const closeInputField = (event: MouseEvent) => {\n    if (!(event.target as Element).closest(\"#create-channel-component\")) {\n      setShowInputField(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"click\", closeInputField);\n    return () => window.removeEventListener(\"click\", closeInputField);\n  }, []);\n\n  return (\n    <div id=\"create-channel-component\">\n      {showInputField ? (\n        <CreateChannelInputField\n          setShowInputField={setShowInputField}\n          channels={channels}\n        />\n      ) : (\n        <button\n          className=\"text-indigo-600 hover:bg-indigo-50 group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold mt-2 w-full\"\n          onClick={(event) => {\n            event.stopPropagation(); // Prevent click event from bubbling\n            setShowInputField(true);\n          }}\n        >\n          <PlusIcon className=\"text-indigo-600 h-6 w-6 shrink-0\" />\n          Create a channel\n        </button>\n      )}\n    </div>\n  );\n};\n\ninterface CreateChannelInputFieldProps {\n  setShowInputField: Dispatch<SetStateAction<boolean>>;\n  channels: { id: string; name: string }[];\n}\n\nconst CreateChannelInputField: React.FC<CreateChannelInputFieldProps> = ({\n  setShowInputField,\n  channels,\n}) => {\n  const [value, setValue] = useState<string>(\"\");\n  const [isError, setIsError] = useState(false);\n\n  const handleInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (isError) setIsError(false);\n    const transformedValue = event.target.value.replace(/\\s+/g, \"-\");\n    setValue(transformedValue);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\" && value.length !== 0) {\n      createChannel(value);\n      setValue(\"\");\n      setShowInputField(false);\n    }\n\n    // Prevent creation of same channel name\n    if (channels.some((channel) => channel.name === value)) setIsError(true);\n  };\n\n  return (\n    <div className=\"relative mt-2 flex items-center\">\n      <input\n        type=\"text\"\n        value={value}\n        onChange={handleInput}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Enter your channel name\"\n        autoFocus\n        className={classNames(\n          isError ? \"bg-red-50 border border-red-500\" : \" ring-indigo-600\",\n          \"block w-full rounded-md border-0 py-1.5 pl-2 pr-10 text-gray-900 shadow-sm ring-2 ring-inset placeholder:text-gray-400 sm:text-sm sm:leading-6\"\n        )}\n      />\n      <div className=\"absolute inset-y-0 right-0 flex py-1.5 pr-1.5\">\n        <kbd className=\"inline-flex items-center rounded border border-gray-200 px-1 font-sans text-xs text-gray-400\">\n          Enter\n        </kbd>\n      </div>\n      {isError && <p className=\"mt-2 text-sm text-red-600 dark:text-red-500\"><span className=\"font-medium\">Too late!</span> Channel name's already taken.</p>}\n    </div>\n  );\n};\n\nexport default CreateChannelComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}